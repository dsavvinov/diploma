\section*{Заключение}

В данной работе было рассмотрено расширение системы эффектов за счет введение условных эффектов. Были предложены правила комбинации эффектов, предусматривающие возможность расширения системы путем добавления новых операторов и эффектов. 

Полученная система лучшим образом проявила себя при работе с утверждениями, которые хорошо укладываются в классическое понятие <<эффекта>> -- т.е. некоторое изменение в контексте, производимое подпрограммой. Можно сделать вывод, что в систему, при желании, можно легко будет добавить большинство классических эффектов: \code{read}, \code{write}, \code{throws}, и др. 

С другой стороны, введение понятий, слабо связанных с побочными эффектами, требует значительно б\a'{o}льших усилий и добавления новых конструкций и операторов. Так, умные приведения типа в коллекциях требуют формализма, являющимся подмножеством теории множеств, и потому укладываются в систему условных эффектов не очень хорошо. Тем не менее, в предложенной системе, технически, имеется возможность выражать и записывать такие понятия.

В качестве примера практической реализации, данная система была реализована в компиляторе языка \lang{Kotlin}. Для учета специфики данного языка (в частности, последовательных вычислений и их частичности), был введен специальный класс эффектов, описывающих исходы вычислений. Знание об этом классе эффектов заложено в систему для корректного извлечения эффектов некоторой последовательности вычислений, некоторые из которых завершаются аварийно (с исключением).

За счет добавления этой системы удалось улучшить статический анализ, выполняемый компилятором языка \lang{Kotlin}. В частности, были:

\begin{itemize}
	\item Поддержаны умные приведения типа, извлекающие информацию из выражений в условных конструкциях и включающих в себя вызовы функций.
	
	\item Поддержаны умные приведения типа, опирающиеся на факт (не)успешного завершения функции (например, в вызовах \code{assert()}). 
	
	\item Поддержаны умные приведения типа в коллекциях (например, в вызовах вида \code{Collection<T>.filter()})
	
	\item Улучшены существующие в компиляторе диагностики (например, об инициализации переменных) за счет эффектов, описывающих, что функция в ходе своего выполнения вызовет некоторую другую детерминированное число раз. 
\end{itemize}

Также было реализовано извлечение эффектов из простых выражений.

В качестве возможных направлений развития следует отметить:

\begin{itemize}
	\item Расширение системы за счет добавления других конструкций логики: кванторы, импликации (в явном виде), предикаты
	
	\item Исследование других эффектов, например, связанных с многопоточностью, IO, чтением-записью в переменные, и т.д.
	
	\item Более полную поддержку автоматического вывода эффектов.
\end{itemize}